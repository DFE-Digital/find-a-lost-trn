<% content_for :page_title, "#{'Error: ' if @preferred_name_form.errors.any?}Is #{@preferred_name_form.official_name} your preferred name?" %>
<% content_for :back_link_url, back_link_url(name_path) %>
<%= form_with model: @preferred_name_form, url: preferred_name_path do |f| %>
  <%= f.govuk_error_summary %>

  <h1 class="govuk-heading-xl">
    <%= "Is #{@preferred_name_form.official_name} your preferred name?" %>
  </h1>

  <p>We can use a different name in correspondence, and tell people what you prefer to be called.</p>

  <%= f.govuk_radio_buttons_fieldset :official_name_preferred, legend: { hidden: true }  do %>
    <%= f.govuk_radio_button :official_name_preferred, true, label: { text: "Yes" }, link_errors: true %>
    <%= f.govuk_radio_button :official_name_preferred, false, label: { text: "No, I prefer to be known by another name" } do %>
      <h2 class="govuk-heading-m">What is your preferred name?</h2>
      <%= f.govuk_text_field(:preferred_first_name, label: { size: 's', text: 'Preferred first name' }) %>
      <%= f.govuk_text_field(:preferred_last_name, label: { size: 's', text: 'Preferred last name' }) %>
    <% end %>
  <% end %>
  <%= f.govuk_submit %>
<% end %>
