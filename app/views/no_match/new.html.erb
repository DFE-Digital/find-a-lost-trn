<% content_for :page_title, "#{'Error: ' if @no_match_form.errors.any?}We could not find your trn" %>
<% content_for :back_link_url, check_answers_path %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_with model: @no_match_form, url: no_match_path do |f| %>
      <%= f.govuk_error_summary %>

      <h1 class="govuk-heading-xl">We could not find your TRN</h1>

      <p class="govuk-body">This could be because you:</p>

      <ul class="govuk-list govuk-list--bullet">
        <li>abbreviated your first name, for example Rob/Robert</li>
        <li>used a different name to the one held on the Teaching Regulation
          Agency records</li>
        <li>mistyped or entered some incorrect information</li>
      </ul>

      <h2 class="govuk-heading-m">Check your details</h2>

      <% rows = [
          {
            key: { text: 'Name' },
            value: { text: @trn_request.name },
          },
          {
            key: { text: 'Date of birth' },
            value: { text: @trn_request.date_of_birth? ? @trn_request.date_of_birth.to_fs(:long_ordinal_uk) : 'Not given' },
          },
          {
            key: { text: @trn_request.has_ni_number? ? 'National Insurance number' : 'Do you have a National Insurance number?' },
            value: { text: @trn_request.has_ni_number? ? pretty_ni_number(@trn_request.ni_number) : 'No' },
          },
          {
            key: { text: @trn_request.itt_provider_enrolled ? 'Where did you get your QTS?' : 'Have you been awarded QTS?' },
            value: { text: @trn_request.itt_provider_enrolled ? @trn_request.itt_provider_name : 'No' },
          },
          { key: { text: 'Email address '},
            value: { text: @trn_request.email },
          },
        ]

        previous_name = {
          key: { text: 'Previous name' },
          value: { text: @trn_request.previous_name },
        }

        rows.insert(1, previous_name) if @trn_request.previous_name?
      %>
      <%= govuk_summary_list(rows: rows) %>

      <%= f.govuk_collection_radio_buttons(:try_again,
            [OpenStruct.new(label: 'Yes, I have different details I can try', value: true), OpenStruct.new(label: 'No, submit these details, they are correct', value: false)],
            :value,
            :label,
            legend: { size: 'm', text: 'Do you want to change something and try again?' }
          ) %>
      <%= f.govuk_submit 'Continue', prevent_double_click: false %>
    <% end %>
  </div>
</div>
